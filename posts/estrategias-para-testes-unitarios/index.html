<!DOCTYPE html><html lang="en" mode="dark" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estratégias para testes unitários | murilo.tech</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Estratégias para testes unitários" /><meta name="author" content="Murilo Costa" /><meta property="og:locale" content="en_US" /><meta name="description" content="Nos dias atuais eu nem preciso explicar aqui a importância da escrita de testes automatizados pois a maioria dos desenvolvedores já entende que ter esses testes em seu software significa qualidade e também produtividade, visto que o tempo adicional que se gasta para escrever um teste automatizado é muito menor que o tempo gasto para se resolver problemas que não foram tratados pela falta de testes." /><meta property="og:description" content="Nos dias atuais eu nem preciso explicar aqui a importância da escrita de testes automatizados pois a maioria dos desenvolvedores já entende que ter esses testes em seu software significa qualidade e também produtividade, visto que o tempo adicional que se gasta para escrever um teste automatizado é muito menor que o tempo gasto para se resolver problemas que não foram tratados pela falta de testes." /><link rel="canonical" href="https://murilo.tech/posts/estrategias-para-testes-unitarios/" /><meta property="og:url" content="https://murilo.tech/posts/estrategias-para-testes-unitarios/" /><meta property="og:site_name" content="murilo.tech" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-01-18T07:30:00-03:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Estratégias para testes unitários" /><meta name="twitter:site" content="@muriloramosdc" /><meta name="twitter:creator" content="@Murilo Costa" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"Nos dias atuais eu nem preciso explicar aqui a importância da escrita de testes automatizados pois a maioria dos desenvolvedores já entende que ter esses testes em seu software significa qualidade e também produtividade, visto que o tempo adicional que se gasta para escrever um teste automatizado é muito menor que o tempo gasto para se resolver problemas que não foram tratados pela falta de testes.","@type":"BlogPosting","url":"https://murilo.tech/posts/estrategias-para-testes-unitarios/","headline":"Estratégias para testes unitários","datePublished":"2021-01-18T07:30:00-03:00","dateModified":"2021-01-18T07:30:00-03:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://murilo.tech/posts/estrategias-para-testes-unitarios/"},"author":{"@type":"Person","name":"Murilo Costa"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/profile/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">murilo.tech</a></div><div class="site-subtitle font-italic">Posts sobre tecnologia, TI e desenvolvimento de software em geral.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIAS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARQUIVO</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/murilo-ramos" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/muriloramosdc" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['murilo','murilo.tech'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/muriloramosduartecosta " target="_blank"> <i class="fab fa-linkedin"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Estratégias para testes unitários</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Buscar..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Estratégias para testes unitários</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 18, 2021, 7:30 AM -0300" > Jan 18, 2021 <i class="unloaded">2021-01-18T07:30:00-03:00</i> </span> by <span class="author"> Murilo Costa </span></div><div> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 22, 2021, 5:42 PM -0300" > Mar 22, 2021 <i class="unloaded">2021-03-22T17:42:55-03:00</i> </span></div></div><div class="post-content"><p style="text-align: justify;">Nos dias atuais eu nem preciso explicar aqui a importância da escrita de testes automatizados pois a maioria dos desenvolvedores já entende que ter esses testes em seu software significa qualidade e também produtividade, visto que o tempo adicional que se gasta para escrever um teste automatizado é muito menor que o tempo gasto para se resolver problemas que não foram tratados pela falta de testes.</p><p style="text-align: justify;">E dentre todos os tipos de testes automatizados o que mais é exercitado pelos desenvolvedores é o famoso teste unitário, que tem como objetivo testar as partes do seu software de forma indepedente, tendo como dependência somente o próprio código.</p><p style="text-align: justify;">Porém ao escrever este tipo de teste nos deparamos com algumas dificuldades que tornam a escrita um pouco complicada, como, por exemplo, saber <strong>o que</strong> deve ser testado, <strong>como</strong> deve ser testado e principalmente como <strong>escrever</strong> um código que pode ser testado.</p><p style="text-align: justify;">E por isso vou compartilhar aqui algumas dicas e estratégias para a escrita de testes unitários, que vão desde entender o que deve ser testado até as modificações que serão necessárias no código para que seja possível escrevê-los.</p><p style="text-align: justify;">Para facilitar vamos usar o projeto de exemplo do último <a href="https://murilo.tech/posts/refatorando-e-alcancando-codigo-limpo/" target="_blank">post</a>, onde iremos usar o <a href="https://xunit.net/" target="_blank">xUnit</a> que é compatível com o .Net Core.</p><h2 id="sabendo-o-que-testar">Sabendo o que testar</h2><p style="text-align: justify;">Basicamente um teste unitário precisa testar todo o comportamento de uma unidade do sistema, o que pode ser alcançado seguindo os seguintes pontos.</p><ul><li>Os testes devem considerar todos os comportamentos de sucesso e também de erros, pois assim pode-se mapear os erros que podem acontecer;</li><li>Deve-se também considerar as exceções, tanto as que são lançadas quanto as capturadas;</li><li>As entradas dos testes devem ser variadas para garantir uma maior cobertura, como testar uma lista com somente um valor, dois ou mais valores e nenhum valor;</li><li>Os testes com valores inválidos devem ser escritos quando aplicável, pois se sua arquitetura não permite chegar um valor inválido no código a ser testado então não é necessário.</li></ul><h2 id="fazendo-uma-lista">Fazendo uma lista</h2><p style="text-align: justify;">Agora que sabemos o que deve ser testado já podemos começar a criar os testes, porém uma dica que dou antes de iniciar é escrever uma lista com todos os testes que devem ser escritos, para que nenhum seja esquecido enquanto se escreve.</p><p style="text-align: justify;">Essa lista pode ser feita em qualquer lugar, em um editor de texto a parte, no papel, porém eu prefiro já fazer direto no código de testes em formato de comentário, e como o exemplo é usando uma linguagem orientada a objetos faremos em uma classe de teste.</p><p style="text-align: justify;">Eu prefiro sempre mapear primeiro os casos de erro e depois os casos de sucesso, sempre na ordem do que acontece no código de produção.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">FileReaderTest</span>
<span class="p">{</span>

    <span class="cm">/*
    Ler dados de arquivo inexistente
    Ler dados com formato de data de contratação inválida
    Ler dados com gênero inválido
    Ler dados com ID que não inicia em 0013
    Ler dados com data de contratação menor que 01/01/2019
    Ler dados com somente um registro e inserir no banco
    Ler dados com mais de um registro e inserir no banco
    */</span>
<span class="p">}</span>
</pre></table></code></div></div><p style="text-align: justify;">É isso mesmo, algo bem simples onde a ideia é que cada item dessa lista será um método de teste.</p><p style="text-align: justify;">Neste exemplo vou estar considerando como premissa que quando o arquivo de entrada existe ele sempre terá pelo menos um registro já no formato correto.</p><h2 id="escrevendo-os-testes">Escrevendo os testes</h2><p style="text-align: justify;">Vamos então começar a escrever os testes. Iremos colocar os arquivos de entrada dentro da pasta <code class="language-plaintext highlighter-rouge">Resources</code> do projeto de testes, que vou colocando aqui de acordo com cada teste.</p><p style="text-align: justify;">A nomenclatura dos testes seguirá o padrão <code class="language-plaintext highlighter-rouge">Deve_ResultadoEsperado_Quando_AcaoExecutada</code>. Outros padrões podem ser encontrados <a href="https://dzone.com/articles/7-popular-unit-test-naming" target="_blank">aqui</a>.</p><h3 id="ler-dados-de-arquivo-inexistente">Ler dados de arquivo inexistente</h3><p style="text-align: justify;">Esse teste irá tentar ler um arquivo que não existe, onde será lançada uma exceção do tipo <code class="language-plaintext highlighter-rouge">FileNotFoundException</code>.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Should_ThrownFileNotFound_When_ReadNonexistentFile</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">fileReader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileReader</span><span class="p">();</span>
    <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">FileNotFoundException</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">fileReader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="s">"./Resources/NonexistentFile.txt"</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="ler-dados-com-data-de-contratação-inválida">Ler dados com data de contratação inválida</h3><p style="text-align: justify;">Esse teste irá ler o arquivo <code class="language-plaintext highlighter-rouge">InvalidHireDateFormatFile.txt</code> que possui a data de contratação com um formato inválido, onde será lançada a exceção <code class="language-plaintext highlighter-rouge">FormatException</code>.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Should_ThrownFormatException_When_ReadFileWithInvalidHireDateFormat</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">fileReader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileReader</span><span class="p">();</span>
    <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">FormatException</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">fileReader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="s">"./Resources/InvalidHireDateFormatFile.txt"</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Arquivo:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>001301;AGENOR DE MIRANDA ARAUJO NETO;NI;2112345678;32/02/2019
</pre></table></code></div></div><h3 id="ler-dados-com-gênero-inválido">Ler dados com gênero inválido</h3><p style="text-align: justify;">Esse teste irá ler o arquivo <code class="language-plaintext highlighter-rouge">InvalidGenderFile.txt</code> que possui um gênero inválido, onde será lançada uma exceção do tipo <code class="language-plaintext highlighter-rouge">Exception</code> com uma mensagem de erro personalizada, que deverá ser validada também no teste.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Should_ThrownException_When_ReadFileWithInvalidGender</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">fileReader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileReader</span><span class="p">();</span>

    <span class="kt">var</span> <span class="n">exception</span> <span class="p">=</span> <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">Exception</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">fileReader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="s">"./Resources/InvalidGenderFile.txt"</span><span class="p">));</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="s">"Gênero desconhecido: A"</span><span class="p">,</span> <span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Arquivo:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>001301;AGENOR DE MIRANDA ARAUJO NETO;A;2112345678;10/02/2019
</pre></table></code></div></div><h3 id="ler-dados-com-id-que-não-inicia-em-0013">Ler dados com ID que não inicia em 0013</h3><p style="text-align: justify;">Esse teste irá ler o arquivo <code class="language-plaintext highlighter-rouge">InvalidIDFile.txt</code> que possui um ID inválido, onde também será lançada uma exceção com mensagem de erro personalizada.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Should_ThrownException_When_ReadFileWithInvalidID</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">fileReader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileReader</span><span class="p">();</span>

    <span class="kt">var</span> <span class="n">exception</span> <span class="p">=</span> <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">Exception</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">fileReader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="s">"./Resources/InvalidIDFile.txt"</span><span class="p">));</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="s">"ID não começa com 0013: 001501"</span><span class="p">,</span> <span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Arquivo:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>001501;AGENOR DE MIRANDA ARAUJO NETO;NI;2112345678;10/02/2019
</pre></table></code></div></div><h3 id="ler-dados-com-data-de-contratação-menor-que-01012019">Ler dados com data de contratação menor que 01/01/2019</h3><p style="text-align: justify;">Esse teste irá ler o arquivo <code class="language-plaintext highlighter-rouge">InvalidHireDateFile.txt</code> que possui a data de contratação menor que 01/01/2019 sendo, portanto, inválida, onde também será lançada uma exceção com mensagem de erro personalizada.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Should_ThrownException_When_ReadFileWithInvalidHireDate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">fileReader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileReader</span><span class="p">();</span>

    <span class="kt">var</span> <span class="n">exception</span> <span class="p">=</span> <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">Exception</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">fileReader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="s">"./Resources/InvalidHireDateFile.txt"</span><span class="p">));</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="s">"Data de importação não pode ser menor que 01/01/2019: 01/01/2018 00:00:00"</span><span class="p">,</span> <span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Arquivo:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>001301;AGENOR DE MIRANDA ARAUJO NETO;NI;2112345678;01/01/2018
</pre></table></code></div></div><h3 id="ler-dados-com-somente-um-registro-e-inserir-no-banco">Ler dados com somente um registro e inserir no banco</h3><p style="text-align: justify;">Agora chegamos nos casos de sucesso, onde o teste irá conseguir percorrer o código até o final, lendo os dados do arquivo, validando e <strong>inserindo no banco de dados</strong>.</p><p style="text-align: justify;">Porém aqui verificamos que temos um problema grande, pois como falamos anteriormente o teste unitário precisa depender somente do código criado e não possuir dependências externas, como é o caso do banco de dados, o que impossibilita criarmos o teste.</p><p style="text-align: justify;">E como resolvemos isso? Será que existe uma forma de usar um mecanismo que substitua o acesso ao banco de dados e que possamos usá-lo para testar o comportamento por completo do código?</p><p style="text-align: justify;">A resposta é sim!</p><h2 id="refatorando-dependências">Refatorando dependências</h2><p style="text-align: justify;">Um dos grandes desafios de se escrever testes unitários sempre está na forma como lidamos com as dependências do nosso código, principalmente as dependências externas, que precisam ser estruturadas de uma forma que possam ser substituídas por mecanismos de <a href="https://pt.wikipedia.org/wiki/Objeto_mock" target="_blank">Mock</a> nos testes unitários, que são mecanismos que podem imitar o comportamento de dependências no código.</p><p style="text-align: justify;">Assim, teremos que fazer uma refatoração em nosso código de produção para tratar a dependência direta do banco de dados, onde a melhor forma de fazer isso aqui será criar uma interface <code class="language-plaintext highlighter-rouge">IEmployeeRepository</code> representando um repositório de dados com um método para adicionar os registros.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">FileReader</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IEmployeeRepository</span>
    <span class="p">{</span>
        <span class="k">void</span> <span class="nf">AddAll</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;</span> <span class="n">employees</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p style="text-align: justify;">E criamos também a sua implementação <code class="language-plaintext highlighter-rouge">MySqlEmployeeRepository</code>, mas que não será utilizada nos testes.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">MySqlConnector</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">FileReader</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MySqlEmployeeRepository</span> <span class="p">:</span> <span class="n">IEmployeeRepository</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">AddAll</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;</span> <span class="n">employees</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">databaseConnection</span> <span class="p">=</span> <span class="nf">CreateDatabaseConnection</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="n">databaseConnection</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>

                <span class="kt">var</span> <span class="n">connectionTransaction</span> <span class="p">=</span> <span class="n">databaseConnection</span><span class="p">.</span><span class="nf">BeginTransaction</span><span class="p">();</span>

                <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">employee</span> <span class="k">in</span> <span class="n">employees</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">databaseCommand</span> <span class="p">=</span> <span class="n">databaseConnection</span><span class="p">.</span><span class="nf">CreateCommand</span><span class="p">())</span>
                    <span class="p">{</span>   
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">Transaction</span> <span class="p">=</span> <span class="n">connectionTransaction</span><span class="p">;</span>
                        
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">CommandText</span> <span class="p">=</span> <span class="s">@"INSERT INTO employees (id, name, gender, phone, hire_date, import_date) VALUES (@id, @name, @gender, @phone, @hire_date, @import_date)"</span><span class="p">;</span>
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@id"</span><span class="p">,</span> <span class="n">employee</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@name"</span><span class="p">,</span> <span class="n">employee</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@gender"</span><span class="p">,</span> <span class="n">employee</span><span class="p">.</span><span class="n">Gender</span><span class="p">);</span>
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@phone"</span><span class="p">,</span> <span class="n">employee</span><span class="p">.</span><span class="n">Phone</span><span class="p">);</span>
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@hire_date"</span><span class="p">,</span> <span class="n">employee</span><span class="p">.</span><span class="n">HireDate</span><span class="p">);</span>
                        <span class="n">databaseCommand</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@import_date"</span><span class="p">,</span> <span class="n">employee</span><span class="p">.</span><span class="n">ImportDate</span><span class="p">);</span>

                        <span class="n">databaseCommand</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                
                <span class="n">connectionTransaction</span><span class="p">.</span><span class="nf">Commit</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="n">MySqlConnection</span> <span class="nf">CreateDatabaseConnection</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">databaseConnectionBuilder</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MySqlConnectionStringBuilder</span>
            <span class="p">{</span>
                <span class="n">Server</span>   <span class="p">=</span> <span class="s">"localhost"</span><span class="p">,</span>
                <span class="n">Port</span>     <span class="p">=</span> <span class="m">3306</span><span class="p">,</span>
                <span class="n">Database</span> <span class="p">=</span> <span class="s">"company"</span><span class="p">,</span>
                <span class="n">UserID</span>   <span class="p">=</span> <span class="s">"company"</span><span class="p">,</span>
                <span class="n">Password</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">,</span>
            <span class="p">};</span>

            <span class="k">return</span> <span class="k">new</span> <span class="nf">MySqlConnection</span><span class="p">(</span><span class="n">databaseConnectionBuilder</span><span class="p">.</span><span class="n">ConnectionString</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p style="text-align: justify;">E assim adicionamos a interface como dependência ao nosso <code class="language-plaintext highlighter-rouge">FileReader</code>.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">FileReader</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">FileReader</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">DateFormat</span> <span class="p">=</span> <span class="s">"dd/MM/yyyy"</span><span class="p">;</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;</span> <span class="n">employees</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;();</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IEmployeeRepository</span> <span class="n">employeeRepository</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">string</span> <span class="n">inputFile</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">FileReader</span><span class="p">(</span><span class="n">IEmployeeRepository</span> <span class="n">employeeRepository</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">employeeRepository</span> <span class="p">=</span> <span class="n">employeeRepository</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Read</span><span class="p">(</span><span class="kt">string</span> <span class="n">inputFile</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">inputFile</span> <span class="p">=</span> <span class="n">inputFile</span><span class="p">;</span>

            <span class="nf">ReadInputFile</span><span class="p">();</span>
            <span class="nf">ValidateData</span><span class="p">();</span>
            <span class="nf">ImportToDatabase</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="c1">//...</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">ImportToDatabase</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Importing to database"</span><span class="p">);</span>

            <span class="n">employeeRepository</span><span class="p">.</span><span class="nf">AddAll</span><span class="p">(</span><span class="n">employees</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">//...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p style="text-align: justify;">E agora com essa modificação temos nossa dependência de banco de dados isolada do nosso código principal, permitindo ser substituída por um <code class="language-plaintext highlighter-rouge">Mock</code> e testada com eficiência.</p><p style="text-align: justify;">Outra coisa legal dessa refatoração é que essa adequação acaba atendendo também a dois princípios do <a href="https://pt.wikipedia.org/wiki/SOLID" target="_blank">SOLID</a>, que é o <strong>SRP</strong> (princípio da responsabilidade única) que diz que uma classe deve ter somente uma responsabilidade, e o <strong>DIP</strong> (dependa de abstrações) o qual diz que uma classe deve depender sempre de abstrações, pois assim é possível trocar implementações sem danos ao código, provendo a famosa inversão de controle.</p><p style="text-align: justify;">Podemos agora finalizar a escrita de testes.</p><h2 id="finalizando-os-testes">Finalizando os testes</h2><p style="text-align: justify;">Para escrever os últimos testes iremos usar a lib <a href="https://github.com/Moq/moq4/wiki/Quickstart" target="_blank">Moq</a> que é um dos mecanismos disponíveis para <code class="language-plaintext highlighter-rouge">Mock</code> no C#, e usaremos um <code class="language-plaintext highlighter-rouge">Mock</code> para substituir o acesso ao banco de dados por meio da interface <code class="language-plaintext highlighter-rouge">IEmployeeRepository</code>, e o teste será verificar chamadas ao método <code class="language-plaintext highlighter-rouge">AddAll</code> da interface.</p><h3 id="ler-dados-com-somente-um-registro-e-inserir-no-banco-1">Ler dados com somente um registro e inserir no banco</h3><p style="text-align: justify;">Esse teste irá ler o arquivo <code class="language-plaintext highlighter-rouge">OneItemFile.txt</code>, validar as informações e inserir no repositório de dados, onde iremos verificar se o método <code class="language-plaintext highlighter-rouge">AddAll</code> da interface foi chamado somente uma vez com uma lista contendo somente um item.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Should_AddOneItemToDatabase_When_ReadFileWithOneItem</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">employeeRepositoryMock</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">IEmployeeRepository</span><span class="p">&gt;();</span>
    <span class="kt">var</span> <span class="n">fileReader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileReader</span><span class="p">(</span><span class="n">employeeRepositoryMock</span><span class="p">.</span><span class="n">Object</span><span class="p">);</span>

    <span class="n">fileReader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="s">"./Resources/OneItemFile.txt"</span><span class="p">);</span>

    <span class="n">employeeRepositoryMock</span><span class="p">.</span><span class="nf">Verify</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="nf">AddAll</span><span class="p">(</span><span class="n">It</span><span class="p">.</span><span class="n">Is</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;&gt;(</span><span class="n">l</span> <span class="p">=&gt;</span> <span class="n">l</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">1</span><span class="p">)),</span> <span class="n">Times</span><span class="p">.</span><span class="nf">Once</span><span class="p">());</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Arquivo:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>001301;AGENOR DE MIRANDA ARAUJO NETO;NI;2112345678;10/02/2019
</pre></table></code></div></div><h3 id="ler-dados-com-mais-de-um-registro-e-inserir-no-banco">Ler dados com mais de um registro e inserir no banco</h3><p style="text-align: justify;">Esse teste irá ler o arquivo <code class="language-plaintext highlighter-rouge">MultipleItemsFile.txt</code>, validar as informações e inserir no repositório de dados, onde iremos verificar se o método <code class="language-plaintext highlighter-rouge">AddAll</code> da interface foi chamado somente uma vez com uma lista contendo quatro itens.</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Should_AddFourItemsToDatabase_When_ReadFileWithFourItems</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">employeeRepositoryMock</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">IEmployeeRepository</span><span class="p">&gt;();</span>
    <span class="kt">var</span> <span class="n">fileReader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileReader</span><span class="p">(</span><span class="n">employeeRepositoryMock</span><span class="p">.</span><span class="n">Object</span><span class="p">);</span>

    <span class="n">fileReader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="s">"./Resources/MultipleItemsFile.txt"</span><span class="p">);</span>

    <span class="n">employeeRepositoryMock</span><span class="p">.</span><span class="nf">Verify</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="nf">AddAll</span><span class="p">(</span><span class="n">It</span><span class="p">.</span><span class="n">Is</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;&gt;(</span><span class="n">l</span> <span class="p">=&gt;</span> <span class="n">l</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">4</span><span class="p">)),</span> <span class="n">Times</span><span class="p">.</span><span class="nf">Once</span><span class="p">());</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Arquivo:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>001301;AGENOR DE MIRANDA ARAUJO NETO;NI;2112345678;10/02/2019
001302;PRISCILLA NOVAES LEONE;F;7111223344;22/04/2020
001303;CASSIA REJANE ELLER;F;2111112222;30/07/2019
001304;RENATO MANFREDINI JUNIOR;M;61135724685;13/08/2019
</pre></table></code></div></div><p style="text-align: justify;">E assim conseguimos terminar todos nossos testes unitários.</p><h2 id="indo-além">Indo além</h2><p style="text-align: justify;">Com os testes finalizados podemos ver que existem outras melhorias que podem ser adicionadas também na aplicação, onde um exemplo é a leitura de dados que poderia ser separada em uma outra classe e utilizada como dependência do mesmo jeito que fizemos com o acesso ao banco de dados, o que ficaria mais aderente ao princípio <strong>SRP</strong> comentado anteriormente. Outro ponto também seriam os testes da classe <code class="language-plaintext highlighter-rouge">MySqlEmployeeRepository</code> que não foram escritos pois é impossível criar um teste unitário para ela, já que está altamente acoplada ao banco de dados, porém isso não significa que não é possível ter outro tipo de teste aqui, onde podemos criar um teste de integração para manipulação do banco.</p><p style="text-align: justify;">Porém não vou abordar esses assuntos aqui para que o post não fique maior do que já ficou rs, então deixo esses pontos para vocês tentarem.</p><p style="text-align: justify;">O código completo pode ser encontrado <a href="https://github.com/murilo-ramos/murilo-tech/tree/master/FileReaderTest" target="_blank">aqui</a>, e nos vemos na próxima!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/c%23/'>C#</a>, <a href='/categories/testes/'>Testes</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/unit-test/" class="post-tag no-text-decoration" >unit-test</a> <a href="/tags/teste-unitario/" class="post-tag no-text-decoration" >teste-unitario</a> <a href="/tags/solid/" class="post-tag no-text-decoration" >solid</a> <a href="/tags/c%23/" class="post-tag no-text-decoration" >c#</a> <a href="/tags/xunit/" class="post-tag no-text-decoration" >xunit</a> <a href="/tags/moq/" class="post-tag no-text-decoration" >moq</a> <a href="/tags/dotnet/" class="post-tag no-text-decoration" >dotnet</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Este post está licenciado sob a <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> pelo autor.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartilhar</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Estratégias para testes unitários - murilo.tech&url=https://murilo.tech/posts/estrategias-para-testes-unitarios/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Estratégias para testes unitários - murilo.tech&u=https://murilo.tech/posts/estrategias-para-testes-unitarios/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Estratégias para testes unitários - murilo.tech&url=https://murilo.tech/posts/estrategias-para-testes-unitarios/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://murilo.tech/posts/estrategias-para-testes-unitarios/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Atualizações Recentes</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/criptografia/">Criptografia</a></li><li><a href="/posts/testes-unitarios-com-spring-usando-mock/">Testes unitários com Spring Framework usando mock</a></li><li><a href="/posts/estrategias-para-testes-unitarios/">Estratégias para testes unitários</a></li><li><a href="/posts/refatorando-e-alcancando-codigo-limpo/">Refatorando e alcançando um código limpo</a></li><li><a href="/posts/ferramentas-para-o-ambiente-de-desenvolvimento/">Ferramentas para o ambiente de desenvolvimento</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Tags Populares</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programacao/">programacao</a> <a class="post-tag" href="/tags/murilo-tech/">murilo tech</a> <a class="post-tag" href="/tags/murilo/">murilo</a> <a class="post-tag" href="/tags/historia/">historia</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/software/">software</a> <a class="post-tag" href="/tags/relato/">relato</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/maven/">maven</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Conteúdo</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Para Ler Depois</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/refatorando-e-alcancando-codigo-limpo/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Dec 7, 2020 <i class="unloaded">2020-12-07T19:20:00-03:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Refatorando e alcançando um código limpo</h3><div class="text-muted small"><p> Acredito que muitos já devem ter observado que eu sou um praticante de código e design de código limpos, que são um conjunto de práticas e padrões para tornar o código mais legível e simples, melho...</p></div></div></a></div><div class="card"> <a href="/posts/testes-unitarios-com-spring-usando-mock/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Mar 22, 2021 <i class="unloaded">2021-03-22T17:40:00-03:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Testes unitários com Spring Framework usando mock</h3><div class="text-muted small"><p> Atualmente podemos dizer que o Spring Framework é a escolha de praticamente todos os desenvolvedores Java que estão iniciando em um novo projeto, e não é pra menos pois esse framework conseguiu reu...</p></div></div></a></div><div class="card"> <a href="/posts/coisas-que-aprendi-estudando-certificacao-java/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > May 4, 2021 <i class="unloaded">2021-05-04T17:30:00-03:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Coisas que aprendi estudando para a certificação Java</h3><div class="text-muted small"><p> Como alguns viram, no último mês de abril foi aniversário da linguagem de programação Java, a linguagem que mais venho utilizando desde meu início de carreira, que está completando 25 anos de idade...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/refatorando-e-alcancando-codigo-limpo/" class="btn btn-outline-primary"><p>Refatorando e alcançando um código limpo</p></a> <a href="/posts/criando-jar-com-dependencias-usando-maven/" class="btn btn-outline-primary"><p>Criando um JAR com dependências usando o Maven</p></a></div><!-- The Disqus lazy loading. Powered by: https://osvaldas.info/lazy-loading-disqus-comments v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung MIT License --><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//murilo-tech.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://murilo.tech/posts/estrategias-para-testes-unitarios/'; this.page.identifier = '/posts/estrategias-para-testes-unitarios/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/muriloramosdc">Murilo Costa</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Alguns direitos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Tags Populares</h4><a class="post-tag" href="/tags/programacao/">programacao</a> <a class="post-tag" href="/tags/murilo-tech/">murilo tech</a> <a class="post-tag" href="/tags/murilo/">murilo</a> <a class="post-tag" href="/tags/historia/">historia</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/software/">software</a> <a class="post-tag" href="/tags/relato/">relato</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/maven/">maven</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-54279404-2', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://murilo.tech{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
